<Window x:Class="ChatbotGomarco.Vistas.VentanaConfiguracion"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        Title="🚀 Configuración Avanzada - Chatbot GOMARCO"
        Height="620" Width="750"
        ResizeMode="CanResize"
        MinHeight="580" MinWidth="700"
        WindowStartupLocation="CenterOwner"
        Icon="/Resources/gomarco-icon.ico"
        Background="#F0F4F8">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Encabezado Mejorado -->
        <Border Grid.Row="0" Background="#FFFFFF" CornerRadius="12" Padding="20,16" Margin="0,0,0,20" 
                BorderBrush="#E2E8F0" BorderThickness="1">
            <StackPanel>
                <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                    <materialDesign:PackIcon Kind="RocketLaunch" 
                                             Width="28" Height="28"
                                             Foreground="#4F46E5"
                                             VerticalAlignment="Center"/>
                    <StackPanel Margin="16,0,0,0" VerticalAlignment="Center">
                        <TextBlock Text="🚀 Configuración Avanzada de IA" 
                                   FontSize="20"
                                   FontWeight="Bold"
                                   Foreground="#1E293B"
                                   Margin="0"/>
                        <TextBlock Text="Configura modelos de IA de última generación para tu chatbot empresarial" 
                                   FontSize="13"
                                   Foreground="#64748B"
                                   Margin="0,4,0,0"/>
                    </StackPanel>
                </StackPanel>
                <!-- Badge de características -->
                <StackPanel Orientation="Horizontal" Margin="44,8,0,0">
                    <Border Background="#EEF2FF" CornerRadius="12" Padding="8,4" Margin="0,0,8,0">
                        <TextBlock Text="🧠 DeepSeek-R1" FontSize="10" FontWeight="Medium" Foreground="#4F46E5"/>
                    </Border>
                    <Border Background="#F0FDF4" CornerRadius="12" Padding="8,4" Margin="0,0,8,0">
                        <TextBlock Text="🔒 100% Privado" FontSize="10" FontWeight="Medium" Foreground="#16A34A"/>
                    </Border>
                    <Border Background="#FEF3C7" CornerRadius="12" Padding="8,4">
                        <TextBlock Text="⚡ Empresarial" FontSize="10" FontWeight="Medium" Foreground="#D97706"/>
                    </Border>
                </StackPanel>
            </StackPanel>
        </Border>

        <!-- Indicador del modelo actualmente cargado mejorado -->
        <Border Background="#FFFFFF" CornerRadius="10" Padding="16,12" Margin="0,0,0,16" 
                BorderBrush="#E5E7EB" BorderThickness="1" Grid.Row="1">
            <StackPanel>
                <StackPanel Orientation="Horizontal" Margin="0,0,0,4">
                    <materialDesign:PackIcon Kind="Cpu" Width="18" Height="18" 
                                             Foreground="#059669" VerticalAlignment="Center"/>
                    <TextBlock Text="🎯 Modelo Activo Actual:" FontSize="14" FontWeight="SemiBold" 
                               Foreground="#374151" Margin="8,0,12,0" VerticalAlignment="Center"/>
                    <TextBlock x:Name="TextoModeloActivo" Text="No configurado" 
                               FontSize="14" FontWeight="Bold" Foreground="#059669" 
                               VerticalAlignment="Center"/>
                    <materialDesign:PackIcon x:Name="IconoModeloActivo" Kind="CheckCircle" 
                                             Width="16" Height="16" Foreground="#10B981" 
                                             Margin="8,0,0,0" VerticalAlignment="Center" 
                                             Visibility="Collapsed"/>
                </StackPanel>
                <TextBlock x:Name="TextoEstadoActivo" Text="Selecciona un modelo para comenzar" 
                           FontSize="11" Foreground="#6B7280" 
                           Margin="26,0,0,0"/>
            </StackPanel>
        </Border>

        <!-- Selector de Modelo Elegante -->
        <StackPanel Grid.Row="2" Margin="0">
            
            <!-- Selector de Proveedor IA -->
            <StackPanel Margin="0,0,0,16">
                <TextBlock Text="Seleccionar Modelo de IA" 
                           FontSize="14" FontWeight="Medium" 
                           Foreground="#1F2937" Margin="0,0,0,8"/>
                
                <ComboBox x:Name="ComboModelos"
                          SelectionChanged="ComboModelos_SelectionChanged"
                          FontSize="13"
                          Padding="12,10"
                          Background="White"
                          BorderBrush="#D1D5DB"
                          BorderThickness="1"
                          Height="44"
                          VerticalContentAlignment="Center">
                    
                    <ComboBoxItem x:Name="ItemOpenAI" Tag="openai">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="Robot" Width="16" Height="16" 
                                                     Foreground="#059669" VerticalAlignment="Center"/>
                            <StackPanel Margin="10,0,0,0">
                                <TextBlock Text="OpenAI GPT-4 Turbo" FontWeight="Medium" FontSize="13"/>
                                <TextBlock Text="API Externa • Modelo más avanzado • Requiere internet" 
                                           FontSize="11" Foreground="#6B7280"/>
                            </StackPanel>
                        </StackPanel>
                    </ComboBoxItem>
                    
                    <ComboBoxItem x:Name="ItemOllama" Tag="ollama">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="Brain" Width="16" Height="16" 
                                                     Foreground="#0284C7" VerticalAlignment="Center"/>
                            <StackPanel Margin="10,0,0,0">
                                <TextBlock Text="Ollama (Modelos Locales)" FontWeight="Medium" FontSize="13"/>
                                <TextBlock Text="100% Privado • Sin internet • Phi-4-Mini y DeepSeek disponibles" 
                                           FontSize="11" Foreground="#6B7280"/>
                            </StackPanel>
                        </StackPanel>
                    </ComboBoxItem>
                    
                    <ComboBoxItem x:Name="ItemDeepSeek" Tag="deepseek">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="Rocket" Width="16" Height="16" 
                                                     Foreground="#8B5CF6" VerticalAlignment="Center"/>
                            <StackPanel Margin="10,0,0,0">
                                <TextBlock Text="DeepSeek-R1 (Razonamiento)" FontWeight="Medium" FontSize="13"/>
                                <TextBlock Text="Modelo avanzado • Razonamiento paso a paso • 100% offline" 
                                           FontSize="11" Foreground="#6B7280"/>
                            </StackPanel>
                        </StackPanel>
                    </ComboBoxItem>
                    
                    <ComboBoxItem x:Name="ItemClaude" Tag="claude">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="AutoAwesome" Width="16" Height="16" 
                                                     Foreground="#F59E0B" VerticalAlignment="Center"/>
                            <StackPanel Margin="10,0,0,0">
                                <TextBlock Text="Claude-Style Llama" FontWeight="Medium" FontSize="13"/>
                                <TextBlock Text="Conversación natural • Estilo Anthropic • Modelo local" 
                                           FontSize="11" Foreground="#6B7280"/>
                            </StackPanel>
                        </StackPanel>
                    </ComboBoxItem>
                </ComboBox>
            </StackPanel>

            <!-- Área de Configuración Dinámica -->
            <Border Background="#F9FAFB" CornerRadius="8" Padding="20" 
                    BorderBrush="#E5E7EB" BorderThickness="1">
                
                <!-- Contenedor principal para todos los paneles de configuración -->
                <StackPanel>
                    <!-- Configuración para OpenAI -->
                    <StackPanel x:Name="PanelConfigOpenAI" Visibility="Visible">
                    
                    <!-- Estado OpenAI -->
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                        <materialDesign:PackIcon x:Name="IconoEstado"
                                                 Kind="AlertCircle" 
                                                 Width="16" Height="16"
                                                 Foreground="#F59E0B"
                                                 VerticalAlignment="Center"/>
                        <TextBlock x:Name="TextoEstado"
                                   Text="IA no configurada" 
                                   FontSize="13"
                                   Foreground="#F59E0B"
                                   Margin="8,0,0,0"
                                   VerticalAlignment="Center"/>
                    </StackPanel>

                    <!-- Campo clave API -->
                    <StackPanel Margin="0,0,0,16">
                        <TextBlock Text="Clave API de OpenAI (comienza con 'sk-')" 
                                   FontSize="13"
                                   Foreground="#374151"
                                   FontWeight="Medium"
                                   Margin="0,0,0,6"/>
                        <TextBox x:Name="TextBoxClaveAPI"
                                 FontSize="12"
                                 Padding="12"
                                 Background="White"
                                 BorderBrush="#D1D5DB"
                                 BorderThickness="1"
                                 Height="40"
                                 VerticalContentAlignment="Center"
                                 FontFamily="Courier New"
                                 Text=""
                                 Tag="Ingresa tu clave API de OpenAI aquí"/>
                    </StackPanel>
                    
                    <!-- Link de ayuda -->
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,0">
                        <materialDesign:PackIcon Kind="OpenInNew" 
                                                 Width="14" Height="14"
                                                 Foreground="#6B7280"
                                                 VerticalAlignment="Center"/>
                        <TextBlock Text="Obtén tu clave API en: " 
                                   FontSize="12"
                                   Foreground="#6B7280"
                                   Margin="6,0,0,0"
                                   VerticalAlignment="Center"/>
                        <TextBlock Text="https://platform.openai.com/api-keys" 
                                   FontSize="12"
                                   Foreground="#3B82F6"
                                   TextDecorations="Underline"
                                   Cursor="Hand"
                                   Margin="0"
                                   VerticalAlignment="Center"/>
                    </StackPanel>
                </StackPanel>

                <!-- Configuración para Ollama -->
                <StackPanel x:Name="PanelConfigOllama" Visibility="Collapsed">
                    
                    <!-- Estado Ollama -->
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                        <materialDesign:PackIcon x:Name="IconoEstadoOllama"
                                                 Kind="Loading" 
                                                 Width="16" Height="16"
                                                 Foreground="#3B82F6"
                                                 VerticalAlignment="Center"/>
                        <TextBlock x:Name="TextoEstadoOllama"
                                   Text="🔍 Verificando e iniciando Ollama automáticamente..." 
                                   FontSize="13"
                                   Foreground="#3B82F6"
                                   Margin="8,0,0,0"
                                   VerticalAlignment="Center"/>
                    </StackPanel>
                    
                    <!-- Panel de instalación de Ollama -->
                    <StackPanel x:Name="PanelInstalacionOllama" Visibility="Collapsed" Margin="0,0,0,16">
                        <Border Background="#FEF2F2" CornerRadius="8" Padding="16" BorderBrush="#F87171" BorderThickness="1">
                            <StackPanel>
                                <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                                    <materialDesign:PackIcon Kind="Download" Width="18" Height="18" 
                                                             Foreground="#DC2626" VerticalAlignment="Center"/>
                                    <TextBlock Text="📦 Ollama no está instalado" FontWeight="Bold" FontSize="14" 
                                               Foreground="#DC2626" Margin="8,0,0,0" VerticalAlignment="Center"/>
                                </StackPanel>
                                <TextBlock Text="Ollama es necesario para ejecutar modelos de IA locales y privados." 
                                           FontSize="12" Foreground="#7F1D1D" Margin="0,0,0,12"/>
                                <Button x:Name="BotonDescargarOllama" 
                                        Content="🚀 Descargar e Instalar Ollama" 
                                        Background="#DC2626" Foreground="White" 
                                        BorderThickness="0" Padding="12,8" 
                                        FontSize="12" FontWeight="Medium" 
                                        Cursor="Hand"
                                        Click="BotonDescargarOllama_Click">
                                    <Button.Template>
                                        <ControlTemplate TargetType="Button">
                                            <Border Background="{TemplateBinding Background}" 
                                                    CornerRadius="6" 
                                                    Padding="{TemplateBinding Padding}">
                                                <ContentPresenter HorizontalAlignment="Center" 
                                                                  VerticalAlignment="Center"/>
                                            </Border>
                                        </ControlTemplate>
                                    </Button.Template>
                                </Button>
                            </StackPanel>
                        </Border>
                    </StackPanel>

                    <!-- Información del modelo disponible -->
                    <StackPanel x:Name="PanelModeloInfo" Margin="0,0,0,12" Visibility="Collapsed">
                        <Border Background="#EBF8FF" CornerRadius="6" Padding="12" BorderBrush="#3B82F6" BorderThickness="1">
                            <StackPanel>
                                <StackPanel Orientation="Horizontal" Margin="0,0,0,4">
                                    <materialDesign:PackIcon Kind="CheckCircle" Width="16" Height="16" 
                                                             Foreground="#10B981" VerticalAlignment="Center"/>
                                    <TextBlock Text="Modelo Local Disponible" FontWeight="Medium" FontSize="13" 
                                               Foreground="#1F2937" Margin="8,0,0,0" VerticalAlignment="Center"/>
                                </StackPanel>
                                <TextBlock x:Name="TextModeloDetectado" Text="Phi-3-Mini (Microsoft)" 
                                           FontSize="13" FontWeight="Medium" Foreground="#059669" Margin="0,4,0,0"/>
                                <TextBlock Text="• 100% offline y privado • 2.2GB • Optimizado para Windows" 
                                           FontSize="11" Foreground="#6B7280" Margin="0,2,0,0"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                    
                    <!-- Información adicional de Ollama mejorada -->
                    <Border Background="#F0FDF4" CornerRadius="8" Padding="16" BorderBrush="#22C55E" BorderThickness="1" Margin="0,8,0,0">
                        <StackPanel>
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                                <materialDesign:PackIcon Kind="Shield" Width="16" Height="16" 
                                                         Foreground="#16A34A" VerticalAlignment="Center"/>
                                <TextBlock Text="🔒 Ventajas de Ollama Local" FontWeight="Bold" FontSize="13" 
                                           Foreground="#16A34A" Margin="8,0,0,0" VerticalAlignment="Center"/>
                            </StackPanel>
                            <TextBlock Text="• 100% privado - tus datos nunca salen de tu PC" FontSize="11" Foreground="#166534" Margin="0,2"/>
                            <TextBlock Text="• Sin conexión a internet - funciona offline" FontSize="11" Foreground="#166534" Margin="0,2"/>
                            <TextBlock Text="• Sin límites de uso - totalmente gratuito" FontSize="11" Foreground="#166534" Margin="0,2"/>
                            <TextBlock Text="• Modelos empresariales: DeepSeek-R1, Phi-4, Claude-style" FontSize="11" Foreground="#166534" Margin="0,2"/>
                        </StackPanel>
                    </Border>
                </StackPanel>

                <!-- Configuración para DeepSeek -->
                <StackPanel x:Name="PanelConfigDeepSeek" Visibility="Collapsed">
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                        <materialDesign:PackIcon Kind="Rocket" Width="16" Height="16" 
                                                 Foreground="#8B5CF6" VerticalAlignment="Center"/>
                        <TextBlock Text="DeepSeek-R1 7B - Modelo de Razonamiento Avanzado" 
                                   FontSize="13" FontWeight="Medium" Foreground="#1F2937" 
                                   Margin="8,0,0,0" VerticalAlignment="Center"/>
                    </StackPanel>
                    
                    <TextBlock Text="• Razonamiento paso a paso como O1/Gemini 2.5 Pro"
                               FontSize="12" Foreground="#6B7280" Margin="0,0,0,4"/>
                    <TextBlock Text="• Ideal para matemáticas, lógica y análisis profundo" 
                               FontSize="12" Foreground="#6B7280" Margin="0,0,0,4"/>
                    <TextBlock Text="• 100% offline, privado y sin límites de uso"
                               FontSize="12" Foreground="#059669" FontWeight="Medium" Margin="0,4,0,0"/>
                </StackPanel>

                <!-- Configuración para Claude -->
                <StackPanel x:Name="PanelConfigClaude" Visibility="Collapsed">
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                        <materialDesign:PackIcon Kind="AutoAwesome" Width="16" Height="16" 
                                                 Foreground="#F59E0B" VerticalAlignment="Center"/>
                        <TextBlock Text="Claude-Style Llama - Conversación Natural" 
                                   FontSize="13" FontWeight="Medium" Foreground="#1F2937" 
                                   Margin="8,0,0,0" VerticalAlignment="Center"/>
                    </StackPanel>
                    
                    <TextBlock Text="• Personalidad Claude 3.5 Sonnet en modelo local"
                               FontSize="12" Foreground="#6B7280" Margin="0,0,0,4"/>
                    <TextBlock Text="• Conversación natural y filosófica estilo Anthropic" 
                               FontSize="12" Foreground="#6B7280" Margin="0,0,0,4"/>
                    <TextBlock Text="• Escritura, conversación y análisis filosófico"
                               FontSize="12" Foreground="#059669" FontWeight="Medium" Margin="0,4,0,0"/>
                </StackPanel>
                
                </StackPanel>
            </Border>
        </StackPanel>

        <!-- Botones de acción -->
        <StackPanel Grid.Row="3" 
                    Orientation="Horizontal" 
                    HorizontalAlignment="Right"
                    Margin="0,16,0,0">
            <Button x:Name="BotonCancelar"
                    Content="❌ Cancelar"
                    Padding="16,10"
                    Margin="0,0,12,0"
                    Background="#F8FAFC"
                    BorderBrush="#CBD5E1"
                    BorderThickness="1"
                    Foreground="#64748B"
                    FontSize="13"
                    FontWeight="Medium"
                    Cursor="Hand"
                    Click="BotonCancelar_Click">
                <Button.Template>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="8"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" 
                                              VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Button.Template>
                <Button.Style>
                    <Style TargetType="Button">
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#E2E8F0"/>
                                <Setter Property="BorderBrush" Value="#94A3B8"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
            </Button>

            <Button x:Name="BotonGuardar"
                    Background="#4F46E5"
                    Foreground="White"
                    BorderThickness="0"
                    Padding="16,10"
                    FontSize="13"
                    FontWeight="SemiBold"
                    Cursor="Hand"
                    Click="BotonGuardar_Click">
                <Button.Template>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                CornerRadius="8" 
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" 
                                              VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Button.Template>
                <Button.Style>
                    <Style TargetType="Button">
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#3730A3"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#312E81"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
                
                <StackPanel Orientation="Horizontal">
                    <materialDesign:PackIcon Kind="RocketLaunch" 
                                             Width="14" Height="14"
                                             VerticalAlignment="Center"/>
                    <TextBlock x:Name="TextoBotonGuardar"
                               Text="🚀 Activar IA" 
                               Margin="6,0,0,0"
                               VerticalAlignment="Center"/>
                </StackPanel>
            </Button>
        </StackPanel>
        
        <!-- Panel de estado en tiempo real para Ollama -->
        <Border x:Name="PanelEstadoOllama" Background="#1E293B" CornerRadius="0,0,8,8" 
                Padding="16,8" Margin="-20,-20,-20,-20" Grid.Row="4" Visibility="Collapsed">
            <StackPanel Orientation="Horizontal">
                <materialDesign:PackIcon x:Name="IconoEstadoTiempoReal" Kind="Loading" 
                                         Width="14" Height="14" Foreground="#F59E0B" 
                                         VerticalAlignment="Center"/>
                <TextBlock x:Name="TextoEstadoTiempoReal" 
                           Text="🔄 Iniciando Ollama automáticamente..." 
                           FontSize="11" Foreground="#F1F5F9" 
                           Margin="8,0,0,0" VerticalAlignment="Center"/>
            </StackPanel>
        </Border>
    </Grid>
</Window> 