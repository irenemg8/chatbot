<Window x:Class="ChatbotGomarco.Vistas.VentanaConfiguracion"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        Title="⚙️ Configuración del Chatbot GOMARCO"
        Height="550" Width="700"
        ResizeMode="CanResize"
        MinHeight="500" MinWidth="650"
        WindowStartupLocation="CenterOwner"
        Icon="/Resources/gomarco-icon.ico"
        Background="#F9FAFB">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Encabezado -->
        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,20">
            <materialDesign:PackIcon Kind="Cog" 
                                     Width="24" Height="24"
                                     Foreground="#3B82F6"
                                     VerticalAlignment="Center"/>
            <StackPanel Margin="12,0,0,0" VerticalAlignment="Center">
                <TextBlock Text="Configuración del Sistema" 
                           FontSize="18"
                           FontWeight="Bold"
                           Foreground="#1F2937"
                           Margin="0"/>
                <TextBlock Text="Configura la IA avanzada para tu chatbot" 
                           FontSize="12"
                           Foreground="#6B7280"
                           Margin="0,4,0,0"/>
            </StackPanel>
        </StackPanel>

        <!-- Contenido Principal con Pestañas Multi-Proveedor -->
        <TabControl Grid.Row="1" 
                    x:Name="TabControlProveedores"
                    SelectionChanged="TabControlProveedores_SelectionChanged"
                    Background="White"
                    BorderBrush="#E5E7EB"
                    BorderThickness="1"
                    Margin="0">
            <TabControl.Resources>
                <Style TargetType="TabItem">
                    <Setter Property="Padding" Value="16,8"/>
                    <Setter Property="FontSize" Value="12"/>
                    <Setter Property="FontWeight" Value="Medium"/>
                    <Setter Property="Background" Value="Transparent"/>
                    <Setter Property="BorderThickness" Value="0"/>
                    <Setter Property="Margin" Value="0,0,0,0"/>
                    <Style.Triggers>
                        <Trigger Property="IsSelected" Value="True">
                            <Setter Property="Background" Value="#F3F4F6"/>
                            <Setter Property="Foreground" Value="#1F2937"/>
                        </Trigger>
                        <Trigger Property="IsSelected" Value="False">
                            <Setter Property="Foreground" Value="#6B7280"/>
                        </Trigger>
                    </Style.Triggers>
                </Style>
            </TabControl.Resources>

            <!-- Pestaña OpenAI -->
            <TabItem x:Name="TabOpenAI">
                <TabItem.Header>
                    <StackPanel Orientation="Horizontal">
                        <materialDesign:PackIcon Kind="Robot" Width="14" Height="14" VerticalAlignment="Center"/>
                        <TextBlock Text="OpenAI (GPT-4)" Margin="6,0,0,0" VerticalAlignment="Center"/>
                        <Ellipse x:Name="StatusOpenAI" Width="8" Height="8" Margin="8,0,0,0" 
                                Fill="#F59E0B" VerticalAlignment="Center"/>
                    </StackPanel>
                </TabItem.Header>
                
                <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                    <StackPanel Margin="16">
                        <!-- Estado OpenAI -->
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                        <materialDesign:PackIcon x:Name="IconoEstado"
                                                 Kind="AlertCircle" 
                                                 Width="14" Height="14"
                                                 Foreground="#F59E0B"
                                                 VerticalAlignment="Center"/>
                        <TextBlock x:Name="TextoEstado"
                                   Text="IA no configurada" 
                                   FontSize="12"
                                   Foreground="#F59E0B"
                                   Margin="6,0,0,0"
                                   VerticalAlignment="Center"/>
                    </StackPanel>

                    <!-- Campo clave API -->
                    <StackPanel Margin="0,0,0,12">
                        <TextBlock Text="Clave API de OpenAI (comienza con 'sk-')" 
                                   FontSize="12"
                                   Foreground="#4B5563"
                                   Margin="0,0,0,4"/>
                        <TextBox x:Name="TextBoxClaveAPI"
                                 FontSize="11"
                                 Padding="8"
                                 Background="White"
                                 BorderBrush="#D1D5DB"
                                 BorderThickness="1"
                                 Height="32"
                                 VerticalContentAlignment="Center"
                                 FontFamily="Courier New"
                                 Text=""
                                 Tag="Ingresa tu clave API de OpenAI aquí"/>
                    </StackPanel>
                    
                    <!-- Link de ayuda -->
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                        <materialDesign:PackIcon Kind="OpenInNew" 
                                                 Width="12" Height="12"
                                                 Foreground="#6B7280"
                                                 VerticalAlignment="Center"/>
                        <TextBlock Text="Obtén tu clave API en: " 
                                   FontSize="11"
                                   Foreground="#6B7280"
                                   Margin="4,0,0,0"
                                   VerticalAlignment="Center"/>
                        <TextBlock Text="https://platform.openai.com/api-keys" 
                                   FontSize="11"
                                   Foreground="#3B82F6"
                                   TextDecorations="Underline"
                                   Cursor="Hand"
                                   Margin="0"
                                   VerticalAlignment="Center"/>
                    </StackPanel>
                    
                    <!-- Información del proveedor OpenAI -->
                    <Border Background="#F9FAFB" CornerRadius="6" Padding="12" Margin="0,12,0,0">
                        <StackPanel>
                            <TextBlock Text="✨ OpenAI GPT-4" FontWeight="Bold" FontSize="13" Foreground="#1F2937" Margin="0,0,0,6"/>
                            <TextBlock Text="Capacidades:" FontWeight="Medium" FontSize="11" Foreground="#374151" Margin="0,0,0,4"/>
                            <TextBlock Text="• Requiere API Key y conexión a internet" FontSize="11" Foreground="#6B7280" Margin="12,0,0,2"/>
                            <TextBlock Text="• Procesamiento en la nube con máxima calidad" FontSize="11" Foreground="#6B7280" Margin="12,0,0,2"/>
                            <TextBlock Text="• Ideal para análisis complejos y conversaciones avanzadas" FontSize="11" Foreground="#6B7280" Margin="12,0,0,2"/>
                            <TextBlock Text="• Soporte multimodal (texto, imágenes, código)" FontSize="11" Foreground="#6B7280" Margin="12,0,0,2"/>
                            <TextBlock Text="• Actualizaciones constantes y mejoras automáticas" FontSize="11" Foreground="#6B7280" Margin="12,0,0,6"/>
                            
                            <TextBlock Text="Ideal para:" FontWeight="Medium" FontSize="11" Foreground="#059669" Margin="0,0,0,4"/>
                            <TextBlock Text="Análisis de documentos complejos, generación de código, tareas que requieren máxima precisión" 
                                       FontSize="10" Foreground="#059669" Margin="12,0,0,0" TextWrapping="Wrap"/>
                        </StackPanel>
                    </Border>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- Pestaña Ollama -->
            <TabItem x:Name="TabOllama">
                <TabItem.Header>
                    <StackPanel Orientation="Horizontal">
                        <materialDesign:PackIcon Kind="Brain" Width="14" Height="14" VerticalAlignment="Center"/>
                        <TextBlock Text="Ollama (Local)" Margin="6,0,0,0" VerticalAlignment="Center"/>
                        <Ellipse x:Name="StatusOllama" Width="8" Height="8" Margin="8,0,0,0" 
                                Fill="#F59E0B" VerticalAlignment="Center"/>
                    </StackPanel>
                </TabItem.Header>
                
                <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                    <StackPanel Margin="16">
                        <!-- Estado Ollama -->
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                        <materialDesign:PackIcon x:Name="IconoEstadoOllama"
                                                 Kind="AlertCircle" 
                                                 Width="14" Height="14"
                                                 Foreground="#F59E0B"
                                                 VerticalAlignment="Center"/>
                        <TextBlock x:Name="TextoEstadoOllama"
                                   Text="Verificando instalación..." 
                                   FontSize="12"
                                   Foreground="#F59E0B"
                                   Margin="6,0,0,0"
                                   VerticalAlignment="Center"/>
                    </StackPanel>

                    <!-- Información del modelo disponible -->
                    <StackPanel x:Name="PanelModeloInfo" Margin="0,0,0,12" Visibility="Collapsed">
                        <Border Background="#EBF8FF" CornerRadius="4" Padding="8" BorderBrush="#3B82F6" BorderThickness="1">
                            <StackPanel>
                                <StackPanel Orientation="Horizontal" Margin="0,0,0,4">
                                    <materialDesign:PackIcon Kind="CheckCircle" Width="14" Height="14" 
                                                             Foreground="#10B981" VerticalAlignment="Center"/>
                                    <TextBlock Text="Modelo Local Disponible" FontWeight="Medium" FontSize="11" 
                                               Foreground="#1F2937" Margin="6,0,0,0" VerticalAlignment="Center"/>
                                </StackPanel>
                                <TextBlock x:Name="TextModeloDetectado" Text="Phi-3-Mini (Microsoft)" 
                                           FontSize="12" FontWeight="Medium" Foreground="#059669" Margin="0,2,0,0"/>
                                <TextBlock Text="• 100% offline y privado • 2.2GB • Optimizado para Windows" 
                                           FontSize="10" Foreground="#6B7280" Margin="0,2,0,0"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                    
                    <!-- Botones de acción para Ollama -->
                    <StackPanel x:Name="PanelAccionesOllama" Orientation="Horizontal" Margin="0,0,0,12" Visibility="Collapsed">
                        <Button x:Name="BotonInstalarOllama"
                                Content="Instalar Ollama"
                                Background="#3B82F6"
                                Foreground="White"
                                BorderThickness="0"
                                Padding="8,4"
                                FontSize="11"
                                Margin="0,0,8,0"
                                Click="BotonInstalarOllama_Click"/>
                        <Button x:Name="BotonDescargarModelo"
                                Content="Descargar Phi-3-Mini"
                                Background="#10B981"
                                Foreground="White"
                                BorderThickness="0"
                                Padding="8,4"
                                FontSize="11"
                                Click="BotonDescargarModelo_Click"/>
                    </StackPanel>
                    
                    <!-- Información del proveedor Ollama -->
                    <Border Background="#F0FDF4" CornerRadius="6" Padding="12" Margin="0,12,0,0">
                        <StackPanel>
                            <TextBlock Text="🧠 Ollama + Phi-3-Mini (Local)" FontWeight="Bold" FontSize="13" Foreground="#1F2937" Margin="0,0,0,6"/>
                            <TextBlock Text="Ventajas de Seguridad:" FontWeight="Medium" FontSize="11" Foreground="#059669" Margin="0,0,0,4"/>
                            <TextBlock Text="• No requiere API Key - 100% offline" FontSize="11" Foreground="#059669" Margin="12,0,0,2"/>
                            <TextBlock Text="• Procesamiento local con zero data leakage" FontSize="11" Foreground="#059669" Margin="12,0,0,2"/>
                            <TextBlock Text="• Ideal para datos sensibles y privacidad total" FontSize="11" Foreground="#059669" Margin="12,0,0,2"/>
                            <TextBlock Text="• Sin límites de uso ni costos por token" FontSize="11" Foreground="#059669" Margin="12,0,0,6"/>
                            
                            <TextBlock Text="Especificaciones:" FontWeight="Medium" FontSize="11" Foreground="#374151" Margin="0,0,0,4"/>
                            <TextBlock Text="• Modelo Microsoft Phi-3-Mini (3.8B parámetros)" FontSize="11" Foreground="#6B7280" Margin="12,0,0,2"/>
                            <TextBlock Text="• Tamaño: ~2.2GB (optimizado para Windows)" FontSize="11" Foreground="#6B7280" Margin="12,0,0,2"/>
                            <TextBlock Text="• Contexto: 128K tokens (documentos largos)" FontSize="11" Foreground="#6B7280" Margin="12,0,0,6"/>
                            
                            <TextBlock Text="Ideal para:" FontWeight="Medium" FontSize="11" Foreground="#DC2626" Margin="0,0,0,4"/>
                            <TextBlock Text="Datos confidenciales, documentos internos, análisis que requieren máxima privacidad empresarial" 
                                       FontSize="10" Foreground="#DC2626" Margin="12,0,0,0" TextWrapping="Wrap"/>
                        </StackPanel>
                    </Border>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- Pestaña DeepSeek (Próximamente) -->
            <TabItem x:Name="TabDeepSeek" Visibility="Collapsed">
                <TabItem.Header>
                    <StackPanel Orientation="Horizontal">
                        <materialDesign:PackIcon Kind="Rocket" Width="14" Height="14" VerticalAlignment="Center"/>
                        <TextBlock Text="DeepSeek (Próximamente)" Margin="6,0,0,0" VerticalAlignment="Center"/>
                        <Ellipse x:Name="StatusDeepSeek" Width="8" Height="8" Margin="8,0,0,0" 
                                Fill="#6B7280" VerticalAlignment="Center"/>
                    </StackPanel>
                </TabItem.Header>
                
                <StackPanel Margin="16">
                    <TextBlock Text="🚀 Próximamente disponible" FontSize="14" FontWeight="Medium" Margin="0,20,0,10"/>
                    <TextBlock Text="DeepSeek será integrado en futuras versiones" FontSize="12" Foreground="#6B7280"/>
                </StackPanel>
            </TabItem>

            <!-- Pestaña Claude (Próximamente) -->
            <TabItem x:Name="TabClaude" Visibility="Collapsed">
                <TabItem.Header>
                    <StackPanel Orientation="Horizontal">
                        <materialDesign:PackIcon Kind="AutoAwesome" Width="14" Height="14" VerticalAlignment="Center"/>
                        <TextBlock Text="Claude (Próximamente)" Margin="6,0,0,0" VerticalAlignment="Center"/>
                        <Ellipse x:Name="StatusClaude" Width="8" Height="8" Margin="8,0,0,0" 
                                Fill="#6B7280" VerticalAlignment="Center"/>
                    </StackPanel>
                </TabItem.Header>
                
                <StackPanel Margin="16">
                    <TextBlock Text="🎯 Próximamente disponible" FontSize="14" FontWeight="Medium" Margin="0,20,0,10"/>
                    <TextBlock Text="Claude será integrado en futuras versiones" FontSize="12" Foreground="#6B7280"/>
                </StackPanel>
            </TabItem>
        </TabControl>

        <!-- Botones de acción -->
        <StackPanel Grid.Row="2" 
                    Orientation="Horizontal" 
                    HorizontalAlignment="Right"
                    Margin="0,16,0,0">
            <Button x:Name="BotonCancelar"
                    Content="Cancelar"
                    Padding="12,6"
                    Margin="0,0,8,0"
                    Background="Transparent"
                    BorderBrush="#D1D5DB"
                    BorderThickness="1"
                    Foreground="#6B7280"
                    FontSize="12"
                    Cursor="Hand"
                    Click="BotonCancelar_Click">
                <Button.Template>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="4"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" 
                                              VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Button.Template>
                <Button.Style>
                    <Style TargetType="Button">
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#F3F4F6"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
            </Button>

            <Button x:Name="BotonGuardar"
                    Background="#3B82F6"
                    Foreground="White"
                    BorderThickness="0"
                    Padding="12,6"
                    FontSize="12"
                    FontWeight="Medium"
                    Cursor="Hand"
                    Click="BotonGuardar_Click">
                <Button.Template>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                CornerRadius="4" 
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" 
                                              VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Button.Template>
                <Button.Style>
                    <Style TargetType="Button">
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#2563EB"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
                
                <StackPanel Orientation="Horizontal">
                    <materialDesign:PackIcon Kind="ContentSave" 
                                             Width="12" Height="12"
                                             VerticalAlignment="Center"/>
                    <TextBlock x:Name="TextoBotonGuardar"
                               Text="Activar IA" 
                               Margin="4,0,0,0"
                               VerticalAlignment="Center"/>
                </StackPanel>
            </Button>
        </StackPanel>
    </Grid>
</Window> 